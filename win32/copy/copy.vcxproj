<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="12.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup Label="Configuration">
    <PlatformToolset>v143</PlatformToolset>
    <ConfigurationType>Application</ConfigurationType>
  </PropertyGroup>
  <ItemGroup Label="ProjectConfigurations">
    <ProjectConfiguration Include="Release|x64">
      <Configuration>Release</Configuration>
      <Platform>x64</Platform>
    </ProjectConfiguration>
  </ItemGroup>
  <PropertyGroup Label="Globals">
    <ProjectGuid>{C9B735E4-75BC-45AC-A5E3-39A6D076F912}</ProjectGuid>
    <RootNamespace>copy</RootNamespace>
  </PropertyGroup>
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.Default.props" />
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.props" />
  <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
  <Import Project="..\zoitechat.props" />
  <ItemGroup>
    <None Include="$(DepsRoot)\bin\cert.pem" />
    <None Include="$(DepsRoot)\bin\gspawn-win$(PlatformArchitecture)-helper.exe" />
    <None Include="$(DepsRoot)\bin\gspawn-win$(PlatformArchitecture)-helper-console.exe" />
    <None Include="$(WinSparklePath)\WinSparkle.dll" />
    <None Include="changelog.url" />
    <None Include="readme.url" />

    <None Include="$(DepsRoot)\bin\$(LuaRuntimeDll)" Condition="'$(LuaEnabled)'=='true' and '$(LuaRuntimeDll)'!=''" />
  </ItemGroup>
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
  <Target Name="Build">
    <ItemGroup>
      <None Include="$(DepsRoot)\bin\*atk-1.0-0.dll" />
      <None Include="$(DepsRoot)\bin\*cairo*.dll" />
      <None Include="$(DepsRoot)\bin\*freetype*.dll" />
      <None Include="$(DepsRoot)\bin\*fribidi*.dll" />
      <None Include="$(DepsRoot)\bin\*fontconfig*.dll" />
      <None Include="$(DepsRoot)\bin\*gdk_pixbuf*.dll" />
      <None Include="$(DepsRoot)\bin\*gdk-3*.dll" />
      <None Include="$(DepsRoot)\bin\*epoxy*.dll" />
      <None Include="$(DepsRoot)\bin\*gio-2*.dll" />
      <None Include="$(DepsRoot)\bin\*glib-2*.dll" />
      <None Include="$(DepsRoot)\bin\*gmodule-2*.dll" />
      <None Include="$(DepsRoot)\bin\*gobject-2*.dll" />
      <None Include="$(DepsRoot)\bin\*gthread-2*.dll" />
      <None Include="$(DepsRoot)\bin\*gtk-3*.dll" />
      <None Include="$(DepsRoot)\bin\*iconv*.dll" />
      <None Include="$(DepsRoot)\bin\*crypto*.dll" />
      <None Include="$(DepsRoot)\bin\*ssl*.dll" />
      <None Include="$(DepsRoot)\bin\*enchant*.dll" />
      <None Include="$(DepsRoot)\bin\*ffi*.dll" />
      <None Include="$(DepsRoot)\bin\*intl*.dll" />
      <None Include="$(DepsRoot)\bin\*jpeg*.dll" />
      <None Include="$(DepsRoot)\bin\*png*.dll" />
      <None Include="$(DepsRoot)\bin\*pcre2-8*.dll" />
      <None Include="$(DepsRoot)\bin\*pixman-1*.dll" />
      <None Include="$(DepsRoot)\bin\*tiff*.dll" />
      <None Include="$(DepsRoot)\bin\*harfbuzz*.dll" />
      <None Include="$(DepsRoot)\bin\*expat*.dll" />
      <None Include="$(DepsRoot)\bin\*xml2*.dll" />
      <None Include="$(DepsRoot)\bin\*pango-1.0-0.dll" />
      <None Include="$(DepsRoot)\bin\*pangocairo-1.0-0.dll" />
      <None Include="$(DepsRoot)\bin\*pangoft2-1.0-0.dll" />
      <None Include="$(DepsRoot)\bin\*pangowin32-1.0-0.dll" />
      <None Include="$(DepsRoot)\bin\*zlib*.dll" />
      <None Include="$(DepsRoot)\bin\*girepository*.dll" Condition="'$(LuaEnabled)'=='true' and '$(LuaLibDir)'!=''" />
      <None Include="$(Python3Path)\Lib\site-packages\_cffi_backend.*.pyd" Condition="'$(Python3Enabled)'=='true'" />

      <LuaLib Include="$(LuaLibDir)\**\*.dll" Condition="'$(LuaEnabled)'=='true' and '$(LuaLibDir)'!=''" />
      <LuaShare Include="$(LuaShareDir)\*.lua" Condition="'$(LuaEnabled)'=='true' and '$(LuaShareDir)'!=''" />
      <LuaShare Include="$(LuaShareDir)\**\*.lua" Condition="'$(LuaEnabled)'=='true' and '$(LuaShareDir)'!=''" />
      <Typelib Include="$(DepsRoot)\lib\girepository-1.0\*.typelib" Condition="'$(LuaEnabled)'=='true' and '$(LuaLibDir)'!=''" />

      <EnchantProviders Include="$(DepsRoot)\lib\enchant\*.dll" />

      <Gtk3Immodules Include="$(DepsRoot)\lib\gtk-3.0\3.0.0\immodules\**\*" />
      <Gtk3PrintBackends Include="$(DepsRoot)\lib\gtk-3.0\3.0.0\printbackends\**\*" />
      <GSettingsSchemas Include="$(DepsRoot)\share\glib-2.0\schemas\*" />
      <GdkPixbufLoaders Include="$(DepsRoot)\lib\gdk-pixbuf-2.0\**\loaders\**\*" />
      <GdkPixbufLoaderCache Include="$(DepsRoot)\lib\gdk-pixbuf-2.0\**\loaders.cache" />

      <FontConfig Include="$(DepsRoot)\etc\fonts\*" />
      <Share Include="share\**\*" />
      <Locale Include="$(ZoiteChatBin)locale\**\*;$(DepsRoot)\share\locale\**\*" />
      <MSWindowsTheme Include="$(DepsRoot)\share\themes\MS-Windows\**\*" />
      <HicolorIcons Include="$(DepsRoot)\share\icons\hicolor\**\*" />
    </ItemGroup>

    <Copy SourceFiles="@(None)" DestinationFolder="$(ZoiteChatRel)" />
    <Copy SourceFiles="@(FontConfig)" DestinationFolder="$(ZoiteChatRel)\etc\fonts" />
    <Copy SourceFiles="@(Gtk3Immodules)" DestinationFiles="@(Gtk3Immodules->'$(ZoiteChatRel)\lib\gtk-3.0\3.0.0\immodules\%(RecursiveDir)%(Filename)%(Extension)')" />
    <Copy SourceFiles="@(Gtk3PrintBackends)" DestinationFiles="@(Gtk3PrintBackends->'$(ZoiteChatRel)\lib\gtk-3.0\3.0.0\printbackends\%(RecursiveDir)%(Filename)%(Extension)')" />
    <Copy SourceFiles="@(GdkPixbufLoaders)" DestinationFiles="@(GdkPixbufLoaders->'$(ZoiteChatRel)\lib\gdk-pixbuf-2.0\%(RecursiveDir)%(Filename)%(Extension)')" />
    <Copy SourceFiles="@(GdkPixbufLoaderCache)" DestinationFiles="@(GdkPixbufLoaderCache->'$(ZoiteChatRel)\lib\gdk-pixbuf-2.0\%(RecursiveDir)%(Filename)%(Extension)')" />
    <Copy SourceFiles="@(GSettingsSchemas)" DestinationFiles="@(GSettingsSchemas->'$(ZoiteChatRel)\share\glib-2.0\schemas\%(Filename)%(Extension)')" />
    <Copy SourceFiles="@(Share)" DestinationFiles="@(Share->'$(ZoiteChatRel)\share\%(RecursiveDir)%(Filename)%(Extension)')" />
    <Copy SourceFiles="..\..\COPYING" DestinationFolder="$(ZoiteChatRel)\share\doc\zoitechat" />
    <Copy SourceFiles="$(WinSparklePath)\COPYING" DestinationFolder="$(ZoiteChatRel)\share\doc\WinSparkle" />
    <Copy SourceFiles="@(EnchantProviders)" DestinationFolder="$(ZoiteChatRel)\lib\enchant" />
    <Copy SourceFiles="@(Locale)" DestinationFiles="@(Locale->'$(ZoiteChatRel)\share\locale\%(RecursiveDir)%(Filename)%(Extension)')" />
    <Copy SourceFiles="@(MSWindowsTheme)" DestinationFiles="@(MSWindowsTheme->'$(ZoiteChatRel)\share\themes\MS-Windows\%(RecursiveDir)%(Filename)%(Extension)')" />
    <Copy SourceFiles="@(HicolorIcons)" DestinationFiles="@(HicolorIcons->'$(ZoiteChatRel)\share\icons\hicolor\%(RecursiveDir)%(Filename)%(Extension)')" />
    <Copy SourceFiles="@(LuaShare)" DestinationFiles="@(LuaShare->'$(ZoiteChatRel)\share\lua\%(RecursiveDir)%(Filename)%(Extension)')" />
    <Copy SourceFiles="@(LuaLib)" DestinationFiles="@(LuaLib->'$(ZoiteChatRel)\lib\lua\%(RecursiveDir)%(Filename)%(Extension)')" />
    <Copy SourceFiles="@(Typelib)" DestinationFiles="@(Typelib->'$(ZoiteChatRel)\lib\girepository-1.0\%(Filename)%(Extension)')" />
    <Copy SourceFiles="..\..\plugins\python\xchat.py" DestinationFolder="$(ZoiteChatRel)\python" Condition="'$(Python3Enabled)'=='true'" />
    <Copy SourceFiles="..\..\plugins\python\hexchat.py" DestinationFolder="$(ZoiteChatRel)\python" Condition="'$(Python3Enabled)'=='true'" />
    <Copy SourceFiles="..\..\plugins\python\zoitechat.py" DestinationFolder="$(ZoiteChatRel)\python" Condition="'$(Python3Enabled)'=='true'" />
    <Copy SourceFiles="..\..\plugins\python\_zoitechat.py" DestinationFolder="$(ZoiteChatRel)\python" Condition="'$(Python3Enabled)'=='true'" />

    <WriteLinesToFile File="$(ZoiteChatRel)portable-mode" Lines="2" Overwrite="true" />

  </Target>
</Project>
